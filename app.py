import streamlit as st
from collections import Counter

# --------------------------------------------------
# 1. –ê—Ä—Ö–µ—Ç–∏–ø—ã —á–∏—Å–µ–ª (1‚Äë9, 11, 22, 33)
# --------------------------------------------------
ARCHETYPES: dict[int, dict[str, str]] = {
    1: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –í–æ–∏–Ω–∞ / –õ–∏–¥–µ—Ä–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–í–æ–ø–ª–æ—â–µ–Ω–∏–µ —Å–∏–ª—ã –≤–æ–ª–∏, –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏, —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.",
        "—Å–≤–µ—Ç": "–ù–æ–≤–∞—Ç–æ—Ä, –ª–∏–¥–µ—Ä, —É–≤–µ—Ä–µ–Ω–Ω—ã–π –≤ —Å–µ–±–µ.",
        "—Ç–µ–Ω—å": "–£–ø—Ä—è–º—Å—Ç–≤–æ, —ç–≥–æ–∏–∑–º, —Å—Ç—Ä–∞—Ö –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞.",
        "–∑–∞–¥–∞—á–∞": "–ò–¥–∏ —Å–≤–æ–∏–º –ø—É—Ç—ë–º, –Ω–µ –±–æ–π—Å—è –±—ã—Ç—å –ø–µ—Ä–≤–æ–π –∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ–π.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–°–º–µ–ª–µ–µ –ø—Ä–æ—è–≤–ª—è–π –ª–∏–¥–µ—Ä—Å—Ç–≤–æ: –Ω–∞—á–Ω–∏ –ø—Ä–æ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–∞–≤–Ω–æ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—à—å."
    },
    2: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –î–∏–ø–ª–æ–º–∞—Ç–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –≥–∞—Ä–º–æ–Ω–∏—è, –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ.",
        "—Å–≤–µ—Ç": "–¢–∞–∫—Ç, —ç–º–ø–∞—Ç–∏—è, —É–º–µ–Ω–∏–µ –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è.",
        "—Ç–µ–Ω—å": "–°–æ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —Å—Ç—Ä–∞—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.",
        "–∑–∞–¥–∞—á–∞": "–£—á–∏—Å—å –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∑–¥–æ—Ä–æ–≤—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏ —á–µ—Å—Ç–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–†–∞–∑–≤–∏–≤–∞–π –Ω–∞–≤—ã–∫ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ –±–µ–∑ –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è —Å–≤–æ–∏—Ö —á—É–≤—Å—Ç–≤."
    },
    3: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –¢–≤–æ—Ä—Ü–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–≠–Ω–µ—Ä–≥–∏—è —Ä–∞–¥–æ—Å—Ç–∏, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è, —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏—è.",
        "—Å–≤–µ—Ç": "–ê—Ä—Ç–∏—Å—Ç–∏–∑–º, –∫—Ä–µ–∞—Ç–∏–≤, –ø–æ–∑–∏—Ç–∏–≤–Ω–æ—Å—Ç—å.",
        "—Ç–µ–Ω—å": "–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ—Å—Ç—å, –∏–∑–±–µ–≥–∞–Ω–∏–µ –≥–ª—É–±–∏–Ω—ã.",
        "–∑–∞–¥–∞—á–∞": "–†–∞—Å–∫—Ä—ã–≤–∞–π —Ç–∞–ª–∞–Ω—Ç—ã —á–µ—Ä–µ–∑ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ –∏–≥—Ä—É.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–í—ã–±–µ—Ä–∏ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–µ —Ö–æ–±–±–∏ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–∞–∫—Ç–∏–∫—É–π."
    },
    4: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –°—Ç—Ä–æ–∏—Ç–µ–ª—è",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å.",
        "—Å–≤–µ—Ç": "–ü—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å, —Ç–µ—Ä–ø–µ–Ω–∏–µ, –ø–æ—Ä—è–¥–æ–∫.",
        "—Ç–µ–Ω—å": "–†–∏–≥–∏–¥–Ω–æ—Å—Ç—å, —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–º–µ–Ω.",
        "–∑–∞–¥–∞—á–∞": "–°–æ–∑–¥–∞–≤–∞–π –ø—Ä–æ—á–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç, —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–π –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–°–æ—Å—Ç–∞–≤—å –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–ª–µ–¥—É–π –µ–º—É."
    },
    5: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –ò—Å–∫–∞—Ç–µ–ª—è",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–°–≤–æ–±–æ–¥–∞, –ø–µ—Ä–µ–º–µ–Ω—ã, –∂–∞–∂–¥–∞ –ø–æ–∑–Ω–∞–Ω–∏—è.",
        "—Å–≤–µ—Ç": "–ì–∏–±–∫–æ—Å—Ç—å, –æ–±—â–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å.",
        "—Ç–µ–Ω—å": "–ò–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å, –∏–∑–±–µ–≥–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤.",
        "–∑–∞–¥–∞—á–∞": "–£—á–∏—Å—å –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ–ø–æ—Ä—ã.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–ó–∞–ø–ª–∞–Ω–∏—Ä—É–π –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –∏–ª–∏ –æ–±—É—á–∞—é—â–∏–π –∫—É—Ä—Å –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–æ–≤."
    },
    6: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –ó–∞–±–æ—Ç–ª–∏–≤–æ–≥–æ –°–µ—Ä–¥—Ü–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –ª—é–±–æ–≤—å, —Å–ª—É–∂–µ–Ω–∏–µ —Å–µ–º—å–µ –∏ –æ–±—â–µ—Å—Ç–≤—É.",
        "—Å–≤–µ—Ç": "–ó–∞–±–æ—Ç–∞, –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å, –¥—É—à–µ–≤–Ω–æ—Å—Ç—å.",
        "—Ç–µ–Ω—å": "–ñ–µ—Ä—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –∏–∑–ª–∏—à–Ω—è—è –æ–ø–µ–∫–∞.",
        "–∑–∞–¥–∞—á–∞": "–ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –∑–∞–±–æ—Ç—É –æ –¥—Ä—É–≥–∏—Ö –∏ –æ —Å–µ–±–µ.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–£—Å—Ç–∞–Ω–æ–≤–∏ –ª–∏—á–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏ –ø—Ä–∞–∫—Ç–∏–∫—É–π —Å–∞–º–æ‚Äë–∑–∞–±–æ—Ç—É –µ–∂–µ–¥–Ω–µ–≤–Ω–æ."
    },
    7: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –ú—É–¥—Ä–µ—Ü–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ê–Ω–∞–ª–∏–∑, –∏–Ω—Ç—É–∏—Ü–∏—è –∏ –≥–ª—É–±–∏–Ω–∞.",
        "—Å–≤–µ—Ç": "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å, –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫, —Ñ–∏–ª–æ—Å–æ—Ñ.",
        "—Ç–µ–Ω—å": "–ó–∞–º–∫–Ω—É—Ç–æ—Å—Ç—å, –∏–∑–æ–ª—è—Ü–∏—è.",
        "–∑–∞–¥–∞—á–∞": "–î–µ–ª–∏—Å—å –∑–Ω–∞–Ω–∏—è–º–∏, –≤—ã—Ö–æ–¥–∏ –∏–∑ —É–µ–¥–∏–Ω–µ–Ω–∏—è.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–û–ø—É–±–ª–∏–∫—É–π —Å—Ç–∞—Ç—å—é –∏–ª–∏ –ø—Ä–æ–≤–µ–¥–∏ –º–∏–Ω–∏‚Äë–ª–µ–∫—Ü–∏—é."
    },
    8: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –£–ø—Ä–∞–≤–ª–µ–Ω—Ü–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–°–∏–ª–∞, –≤–ª–∞—Å—Ç—å, –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–π —É—Å–ø–µ—Ö.",
        "—Å–≤–µ—Ç": "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.",
        "—Ç–µ–Ω—å": "–ñ—ë—Å—Ç–∫–æ—Å—Ç—å, —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç—Ä–æ–ª—é.",
        "–∑–∞–¥–∞—á–∞": "–£–ø—Ä–∞–≤–ª—è–π —Å –∑–∞–±–æ—Ç–æ–π, –¥–µ–ª–µ–≥–∏—Ä—É–π —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π, –≥–¥–µ –º–æ–∂–Ω–æ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–Ω—è—Ç—å –∏–∑–ª–∏—à–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å."
    },
    9: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –°–ª—É–∂–∏—Ç–µ–ª—è",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ì—É–º–∞–Ω–∏–∑–º, —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ.",
        "—Å–≤–µ—Ç": "–©–µ–¥—Ä–æ—Å—Ç—å, –∑—Ä–µ–ª–æ—Å—Ç—å, —ç–º–ø–∞—Ç–∏—è.",
        "—Ç–µ–Ω—å": "–í—ã–≥–æ—Ä–∞–Ω–∏–µ, –∂–µ—Ä—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.",
        "–∑–∞–¥–∞—á–∞": "–£–≤–∞–∂–∞–π —Å–≤–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã, –Ω–µ —Ä–∞—Å—Ç–≤–æ—Ä—è–π—Å—è –≤ –¥—Ä—É–≥–∏—Ö.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–ü—Ä–∞–∫—Ç–∏–∫—É–π –±–∞–ª–∞–Ω—Å –æ—Ç–¥–∞—á–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏."
    },
    11: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –ü—Ä–æ–≤–∏–¥—Ü–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ò–Ω—Ç—É–∏—Ü–∏—è, –¥—É—Ö–æ–≤–Ω—ã–µ –æ–∑–∞—Ä–µ–Ω–∏—è, —Ç–æ–Ω–∫–æ–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ.",
        "—Å–≤–µ—Ç": "–û–∑–∞—Ä–µ–Ω–∏—è, —Å–≤—è–∑—å —Å –í—ã—Å—à–∏–º.",
        "—Ç–µ–Ω—å": "–†–∞—Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∫–∞, —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å.",
        "–∑–∞–¥–∞—á–∞": "–°–ª–µ–¥—É–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É –∑–æ–≤—É, –∑–∞–∑–µ–º–ª—è–π –∏–¥–µ–∏.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–í–µ–¥–∏ –¥–Ω–µ–≤–Ω–∏–∫ –∏–Ω—Å–∞–π—Ç–æ–≤, –º–µ–¥–∏—Ç–∏—Ä—É–π –µ–∂–µ–¥–Ω–µ–≤–Ω–æ."
    },
    22: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –Ω–æ–≤–æ–≥–æ –º–∏—Ä–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ú–∞—Å—à—Ç–∞–±–Ω–æ–µ —Å–æ–∑–∏–¥–∞–Ω–∏–µ, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏–¥–µ–∏.",
        "—Å–≤–µ—Ç": "–ú–∞—Å—Ç–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤, —Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–∏–¥–µ—Ä.",
        "—Ç–µ–Ω—å": "–°—Ç—Ä–∞—Ö –ø—Ä–æ–≤–∞–ª–∞, –≤—ã–≥–æ—Ä–∞–Ω–∏–µ.",
        "–∑–∞–¥–∞—á–∞": "–î–µ–π—Å—Ç–≤—É–π –ø–æ—à–∞–≥–æ–≤–æ, –¥–æ–≤–µ—Ä—è–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –æ–ø–æ—Ä–µ.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–†–∞–∑–¥–µ–ª–∏ –±–æ–ª—å—à–æ–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ —ç—Ç–∞–ø—ã –∏ —Å–ª–µ–¥—É–π –ø–ª–∞–Ω—É."
    },
    33: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–£—á–∏—Ç–µ–ª—å –£—á–∏—Ç–µ–ª–µ–π",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ë–µ–∑—É—Å–ª–æ–≤–Ω–∞—è –ª—é–±–æ–≤—å, –¥—É—Ö–æ–≤–Ω–æ–µ —Å–ª—É–∂–µ–Ω–∏–µ.",
        "—Å–≤–µ—Ç": "–¶–µ–ª–∏—Ç–µ–ª—å—Å—Ç–≤–æ, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ.",
        "—Ç–µ–Ω—å": "–°–ø–∞—Å–∞—Ç–µ–ª—å—Å—Ç–≤–æ, —Å–∞–º–æ–ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ.",
        "–∑–∞–¥–∞—á–∞": "–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π –∑–¥–æ—Ä–æ–≤—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã, —Å–æ—Ö—Ä–∞–Ω—è—è —ç–Ω–µ—Ä–≥–∏—é.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–í—ã–¥–µ–ª—è–π –≤—Ä–µ–º—è –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ª–∏—á–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏."
    },
}

# --------------------------------------------------
# 2. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—á—ë—Ç–∞
# --------------------------------------------------

def reduce_num(n: int) -> int:
    """–°–≤–µ—Ä–Ω—É—Ç—å —á–∏—Å–ª–æ –¥–æ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–≥–æ –∏–ª–∏ –º–∞—Å—Ç–µ—Ä‚Äë—á–∏—Å–ª–∞."""
    while n not in {11, 22, 33} and n > 9:
        n = sum(int(d) for d in str(n))
    return n


def calculate_matrix(day: int, month: int, year: int) -> dict[str, int]:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å –∏–∑ 12 –ø–æ–∑–∏—Ü–∏–π –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –º–∞—Ç—Ä–∏—Ü—ã."""
    sum_d = sum(int(i) for i in str(day))
    sum_m = sum(int(i) for i in str(month))
    sum_y = sum(int(i) for i in str(year))

    life_path = reduce_num(sum(int(i) for i in f"{day:02d}{month:02d}{year}"))
    soul_code = reduce_num(sum_d + sum_m + sum_y)
    karma_tail = reduce_num(sum_d + sum_m)
    gift = reduce_num(sum_d + sum_y)
    body_code = reduce_num(sum_m)
    birth_code = reduce_num(sum_y)

    gates = reduce_num(abs(soul_code - karma_tail))
    abundance = reduce_num(gift + body_code)
    memory = reduce_num(birth_code + karma_tail)
    realization = reduce_num(life_path + gift)
    love = reduce_num(karma_tail + body_code)
    spirit = reduce_num(life_path + birth_code)

    return {
        "–ß–∏—Å–ª–æ –ñ–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –ü—É—Ç–∏": life_path,
        "–ß–∏—Å–ª–æ –î—É—à–∏": soul_code,
        "–ß–∏—Å–ª–æ –ö–∞—Ä–º—ã": karma_tail,
        "–î–∞—Ä / –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª": gift,
        "–ö–æ–¥ –¢–µ–ª–∞ / –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏": body_code,
        "–≠–Ω–µ—Ä–≥–∏—è –≥–æ–¥–∞ —Ä–æ–∂–¥–µ–Ω–∏—è": birth_code,
        "–í—Ä–∞—Ç–∞ –î—É—à–∏": gates,
        "–ö–æ–¥ –ò–∑–æ–±–∏–ª–∏—è": abundance,
        "–ò–Ω–∫–∞—Ä–Ω–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å": memory,
        "–ö–∞–Ω–∞–ª –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏": realization,
        "–ö–∞–Ω–∞–ª –õ—é–±–≤–∏": love,
        "–ö–∞–Ω–∞–ª –î—É—Ö–∞": spirit
    }


# --------------------------------------------------
# 3. –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç—Ä–µ—Ç
# --------------------------------------------------

def render_psychological_portrait(values: list[int]) -> None:
    st.subheader("üéØ –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç—Ä–µ—Ç")
    counts = Counter(values)

    # –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —ç–Ω–µ—Ä–≥–∏–∏
    reps = [f"–ß–∏—Å–ª–æ {k} ({v} —Ä–∞–∑) ‚Äî {ARCHETYPES[k]['–Ω–∞–∑–≤–∞–Ω–∏–µ']}" for k, v in counts.items() if v > 1]
    if reps:
        st.markdown("**–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —ç–Ω–µ—Ä–≥–∏–∏:**")
        for line in reps:
            st.markdown(f"- {line}")

    # –ú–∞—Å—Ç–µ—Ä‚Äë—ç–Ω–µ—Ä–≥–∏–∏
    masters = [n for n in values if n in {11, 22, 33}]
    if masters:
        st.markdown("**–ú–∞—Å—Ç–µ—Ä‚Äë—ç–Ω–µ—Ä–≥–∏–∏:**")
        for m in sorted(set(masters)):
            st.markdown(f"- {m} ‚Äî {ARCHETYPES[m]['–Ω–∞–∑–≤–∞–Ω–∏–µ']}")

    # –ö–æ–Ω—Ñ–ª–∏–∫—Ç 1 –∏ 33
    if 1 in values and 33 in values:
        st.warning("–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç: —Å–ª—É–∂–µ–Ω–∏–µ (33) ‚Üî —Å–∞–º–æ—Å—Ç—å (1). –ù–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–æ–±–æ–π –∏ –¥—Ä—É–≥–∏–º–∏.")

    # –û–±–æ–±—â—ë–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç
    dominant, dom_count = counts.most_common(1)[0]
    art = ARCHETYPES[dominant]
    st.markdown("**–û–±–æ–±—â—ë–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç –ª–∏—á–Ω–æ—Å—Ç–∏:**")
    st.markdown(f"–ì–ª–∞–≤–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è: **{dominant} ‚Äî {art['–Ω–∞–∑–≤–∞–Ω–∏–µ']}** (–ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è {dom_count}√ó)")
    st.markdown(f"–°—É—Ç—å: {art['–æ–ø–∏—Å–∞–Ω–∏–µ']}")
    st.markdown(f"–ö–ª—é—á–µ–≤–∞—è –∑–∞–¥–∞—á–∞: {art['–∑–∞–¥–∞—á–∞']}")
    st.markdown(f"–ü–æ–¥–¥–µ—Ä–∂–∫–∞: {art['—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏']}")


# --------------------------------------------------
# 4. Streamlit UI
# --------------------------------------------------

st.set_page_config(page_title="–ß–∏—Å–ª–∞ —Å—É–¥—å–±—ã", page_icon="üî¢", layout="centered")
st.title("üî¢ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä \"–ß–∏—Å–ª–∞ —Å—É–¥—å–±—ã\"")

with st.form("input_form"):
    col1, col2, col3 = st.columns(3)
    with col1:
        day = st.number_input("–î–µ–Ω—å", 1, 31, 1)
    with col2:
        month = st.number_input("–ú–µ—Å—è—Ü", 1, 12, 1)
    with col3:
        year = st.number_input("–ì–æ–¥", 1900, 2100, 1984)
    submitted = st.form_submit_button("–†–∞—Å—Å—á–∏—Ç–∞—Ç—å")

if submitted:
    matrix = calculate_matrix(int(day), int(month), int(year))

    # –ü–æ–∫–∞–∑ –ø–æ–∑–∏—Ü–∏–π
    for name, val in matrix.items():
        art = ARCHETYPES.get(val)
        st.markdown(f"### {name}: {val} ‚Äî {art['–Ω–∞–∑–≤–∞–Ω–∏–µ'] if art else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}")
        if art:
            st.markdown(f"**–°—É—Ç—å:** {art['–æ–ø–∏—Å–∞–Ω–∏–µ']}")
            st.markdown(f"**–°–≤–µ—Ç:** {art['—Å–≤–µ—Ç']}")
            st.markdown(f"**–¢–µ–Ω—å:** {art['—Ç–µ–Ω—å']}")
            st.markdown(f"**–ó–∞–¥–∞—á–∞:** {art['–∑–∞–¥–∞—á–∞']}")
            st.markdown(f"**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:** {art['—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏']}")
        st.markdown("---")

    # –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç—Ä–µ—Ç
    render_psychological_portrait(list(matrix.values()))
