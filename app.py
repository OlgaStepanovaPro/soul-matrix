import streamlit as st
from collections import Counter

# --------------------------------------------------
# 1. –ê—Ä—Ö–µ—Ç–∏–ø—ã —á–∏—Å–µ–ª (1‚Äë9, 11, 22, 33)
# --------------------------------------------------
ARCHETYPES: dict[int, dict[str, str]] = {
    1: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –í–æ–∏–Ω–∞ / –õ–∏–¥–µ—Ä–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–í–æ–ø–ª–æ—â–µ–Ω–∏–µ —Å–∏–ª—ã –≤–æ–ª–∏, –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏, —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.",
        "—Å–≤–µ—Ç": "–ù–æ–≤–∞—Ç–æ—Ä, –ª–∏–¥–µ—Ä, —É–≤–µ—Ä–µ–Ω–Ω—ã–π –≤ —Å–µ–±–µ.",
        "—Ç–µ–Ω—å": "–£–ø—Ä—è–º—Å—Ç–≤–æ, —ç–≥–æ–∏–∑–º, —Å—Ç—Ä–∞—Ö –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞.",
        "–∑–∞–¥–∞—á–∞": "–ò–¥–∏ —Å–≤–æ–∏–º –ø—É—Ç—ë–º, –Ω–µ –±–æ–π—Å—è –±—ã—Ç—å –ø–µ—Ä–≤–æ–π –∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ–π.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–°–º–µ–ª–µ–µ –ø—Ä–æ—è–≤–ª—è–π –ª–∏–¥–µ—Ä—Å—Ç–≤–æ: –Ω–∞—á–Ω–∏ –ø—Ä–æ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–∞–≤–Ω–æ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—à—å."
    },
    2: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –î–∏–ø–ª–æ–º–∞—Ç–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –≥–∞—Ä–º–æ–Ω–∏—è, –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ.",
        "—Å–≤–µ—Ç": "–¢–∞–∫—Ç, —ç–º–ø–∞—Ç–∏—è, —É–º–µ–Ω–∏–µ –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è.",
        "—Ç–µ–Ω—å": "–°–æ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —Å—Ç—Ä–∞—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.",
        "–∑–∞–¥–∞—á–∞": "–£—á–∏—Å—å –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∑–¥–æ—Ä–æ–≤—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏ —á–µ—Å—Ç–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–†–∞–∑–≤–∏–≤–∞–π –Ω–∞–≤—ã–∫ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ –±–µ–∑ –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è —Å–≤–æ–∏—Ö —á—É–≤—Å—Ç–≤."
    },
    3: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –¢–≤–æ—Ä—Ü–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–≠–Ω–µ—Ä–≥–∏—è —Ä–∞–¥–æ—Å—Ç–∏, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è, —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏—è.",
        "—Å–≤–µ—Ç": "–ê—Ä—Ç–∏—Å—Ç–∏–∑–º, –∫—Ä–µ–∞—Ç–∏–≤, –ø–æ–∑–∏—Ç–∏–≤–Ω–æ—Å—Ç—å.",
        "—Ç–µ–Ω—å": "–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ—Å—Ç—å, –∏–∑–±–µ–≥–∞–Ω–∏–µ –≥–ª—É–±–∏–Ω—ã.",
        "–∑–∞–¥–∞—á–∞": "–†–∞—Å–∫—Ä—ã–≤–∞–π —Ç–∞–ª–∞–Ω—Ç—ã —á–µ—Ä–µ–∑ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ –∏–≥—Ä—É.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–í—ã–±–µ—Ä–∏ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–µ —Ö–æ–±–±–∏ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–∞–∫—Ç–∏–∫—É–π."
    },
    4: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –°—Ç—Ä–æ–∏—Ç–µ–ª—è",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å.",
        "—Å–≤–µ—Ç": "–ü—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å, —Ç–µ—Ä–ø–µ–Ω–∏–µ, –ø–æ—Ä—è–¥–æ–∫.",
        "—Ç–µ–Ω—å": "–†–∏–≥–∏–¥–Ω–æ—Å—Ç—å, —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–º–µ–Ω.",
        "–∑–∞–¥–∞—á–∞": "–°–æ–∑–¥–∞–≤–∞–π –ø—Ä–æ—á–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç, —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–π –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–°–æ—Å—Ç–∞–≤—å –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–ª–µ–¥—É–π –µ–º—É."
    },
    5: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –ò—Å–∫–∞—Ç–µ–ª—è",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–°–≤–æ–±–æ–¥–∞, –ø–µ—Ä–µ–º–µ–Ω—ã, –∂–∞–∂–¥–∞ –ø–æ–∑–Ω–∞–Ω–∏—è.",
        "—Å–≤–µ—Ç": "–ì–∏–±–∫–æ—Å—Ç—å, –æ–±—â–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å.",
        "—Ç–µ–Ω—å": "–ò–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å, –∏–∑–±–µ–≥–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤.",
        "–∑–∞–¥–∞—á–∞": "–£—á–∏—Å—å –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ–ø–æ—Ä—ã.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–ó–∞–ø–ª–∞–Ω–∏—Ä—É–π –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –∏–ª–∏ –æ–±—É—á–∞—é—â–∏–π –∫—É—Ä—Å –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–æ–≤."
    },
    6: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –ó–∞–±–æ—Ç–ª–∏–≤–æ–≥–æ –°–µ—Ä–¥—Ü–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –ª—é–±–æ–≤—å, —Å–ª—É–∂–µ–Ω–∏–µ —Å–µ–º—å–µ –∏ –æ–±—â–µ—Å—Ç–≤—É.",
        "—Å–≤–µ—Ç": "–ó–∞–±–æ—Ç–∞, –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å, –¥—É—à–µ–≤–Ω–æ—Å—Ç—å.",
        "—Ç–µ–Ω—å": "–ñ–µ—Ä—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –∏–∑–ª–∏—à–Ω—è—è –æ–ø–µ–∫–∞.",
        "–∑–∞–¥–∞—á–∞": "–ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –∑–∞–±–æ—Ç—É –æ –¥—Ä—É–≥–∏—Ö –∏ –æ —Å–µ–±–µ.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–£—Å—Ç–∞–Ω–æ–≤–∏ –ª–∏—á–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏ –ø—Ä–∞–∫—Ç–∏–∫—É–π —Å–∞–º–æ‚Äë–∑–∞–±–æ—Ç—É –µ–∂–µ–¥–Ω–µ–≤–Ω–æ."
    },
    7: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –ú—É–¥—Ä–µ—Ü–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ê–Ω–∞–ª–∏–∑, –∏–Ω—Ç—É–∏—Ü–∏—è –∏ –≥–ª—É–±–∏–Ω–∞.",
        "—Å–≤–µ—Ç": "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å, –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫, —Ñ–∏–ª–æ—Å–æ—Ñ.",
        "—Ç–µ–Ω—å": "–ó–∞–º–∫–Ω—É—Ç–æ—Å—Ç—å, –∏–∑–æ–ª—è—Ü–∏—è.",
        "–∑–∞–¥–∞—á–∞": "–î–µ–ª–∏—Å—å –∑–Ω–∞–Ω–∏—è–º–∏, –≤—ã—Ö–æ–¥–∏ –∏–∑ —É–µ–¥–∏–Ω–µ–Ω–∏—è.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–û–ø—É–±–ª–∏–∫—É–π —Å—Ç–∞—Ç—å—é –∏–ª–∏ –ø—Ä–æ–≤–µ–¥–∏ –º–∏–Ω–∏‚Äë–ª–µ–∫—Ü–∏—é."
    },
    8: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –£–ø—Ä–∞–≤–ª–µ–Ω—Ü–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–°–∏–ª–∞, –≤–ª–∞—Å—Ç—å, –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–π —É—Å–ø–µ—Ö.",
        "—Å–≤–µ—Ç": "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.",
        "—Ç–µ–Ω—å": "–ñ—ë—Å—Ç–∫–æ—Å—Ç—å, —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç—Ä–æ–ª—é.",
        "–∑–∞–¥–∞—á–∞": "–£–ø—Ä–∞–≤–ª—è–π —Å –∑–∞–±–æ—Ç–æ–π, –¥–µ–ª–µ–≥–∏—Ä—É–π —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π, –≥–¥–µ –º–æ–∂–Ω–æ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–Ω—è—Ç—å –∏–∑–ª–∏—à–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å."
    },
    9: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –°–ª—É–∂–∏—Ç–µ–ª—è",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ì—É–º–∞–Ω–∏–∑–º, —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ.",
        "—Å–≤–µ—Ç": "–©–µ–¥—Ä–æ—Å—Ç—å, –∑—Ä–µ–ª–æ—Å—Ç—å, —ç–º–ø–∞—Ç–∏—è.",
        "—Ç–µ–Ω—å": "–í—ã–≥–æ—Ä–∞–Ω–∏–µ, –∂–µ—Ä—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.",
        "–∑–∞–¥–∞—á–∞": "–£–≤–∞–∂–∞–π —Å–≤–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã, –Ω–µ —Ä–∞—Å—Ç–≤–æ—Ä—è–π—Å—è –≤ –¥—Ä—É–≥–∏—Ö.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–ü—Ä–∞–∫—Ç–∏–∫—É–π –±–∞–ª–∞–Ω—Å –æ—Ç–¥–∞—á–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏."
    },
    11: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü—É—Ç—å –ü—Ä–æ–≤–∏–¥—Ü–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ò–Ω—Ç—É–∏—Ü–∏—è, –¥—É—Ö–æ–≤–Ω—ã–µ –æ–∑–∞—Ä–µ–Ω–∏—è, —Ç–æ–Ω–∫–æ–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ.",
        "—Å–≤–µ—Ç": "–û–∑–∞—Ä–µ–Ω–∏—è, —Å–≤—è–∑—å —Å –í—ã—Å—à–∏–º.",
        "—Ç–µ–Ω—å": "–†–∞—Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∫–∞, —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å.",
        "–∑–∞–¥–∞—á–∞": "–°–ª–µ–¥—É–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É –∑–æ–≤—É, –∑–∞–∑–µ–º–ª—è–π –∏–¥–µ–∏.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–í–µ–¥–∏ –¥–Ω–µ–≤–Ω–∏–∫ –∏–Ω—Å–∞–π—Ç–æ–≤, –º–µ–¥–∏—Ç–∏—Ä—É–π –µ–∂–µ–¥–Ω–µ–≤–Ω–æ."
    },
    22: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –Ω–æ–≤–æ–≥–æ –º–∏—Ä–∞",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ú–∞—Å—à—Ç–∞–±–Ω–æ–µ —Å–æ–∑–∏–¥–∞–Ω–∏–µ, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏–¥–µ–∏.",
        "—Å–≤–µ—Ç": "–ú–∞—Å—Ç–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤, —Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–∏–¥–µ—Ä.",
        "—Ç–µ–Ω—å": "–°—Ç—Ä–∞—Ö –ø—Ä–æ–≤–∞–ª–∞, –≤—ã–≥–æ—Ä–∞–Ω–∏–µ.",
        "–∑–∞–¥–∞—á–∞": "–î–µ–π—Å—Ç–≤—É–π –ø–æ—à–∞–≥–æ–≤–æ, –¥–æ–≤–µ—Ä—è–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –æ–ø–æ—Ä–µ.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–†–∞–∑–¥–µ–ª–∏ –±–æ–ª—å—à–æ–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ —ç—Ç–∞–ø—ã –∏ —Å–ª–µ–¥—É–π –ø–ª–∞–Ω—É."
    },
    33: {
        "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–£—á–∏—Ç–µ–ª—å –£—á–∏—Ç–µ–ª–µ–π",
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ë–µ–∑—É—Å–ª–æ–≤–Ω–∞—è –ª—é–±–æ–≤—å, –¥—É—Ö–æ–≤–Ω–æ–µ —Å–ª—É–∂–µ–Ω–∏–µ.",
        "—Å–≤–µ—Ç": "–¶–µ–ª–∏—Ç–µ–ª—å—Å—Ç–≤–æ, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ.",
        "—Ç–µ–Ω—å": "–°–ø–∞—Å–∞—Ç–µ–ª—å—Å—Ç–≤–æ, —Å–∞–º–æ–ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ.",
        "–∑–∞–¥–∞—á–∞": "–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π –∑–¥–æ—Ä–æ–≤—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã, —Å–æ—Ö—Ä–∞–Ω—è—è —ç–Ω–µ—Ä–≥–∏—é.",
        "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": "–í—ã–¥–µ–ª—è–π –≤—Ä–µ–º—è –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ª–∏—á–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏."
    },
}

# --------------------------------------------------
# 2. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—á—ë—Ç–∞
# --------------------------------------------------

def reduce_num(n: int) -> int:
    while n not in {11, 22, 33} and n > 9:
        n = sum(int(d) for d in str(n))
    return n

def digit_sum(n: int) -> int:
    return sum(int(d) for d in str(n))

def calculate_matrix(day: int, month: int, year: int) -> dict[str, int]:
    red_day = reduce_num(day)
    red_month = reduce_num(month)
    red_year = reduce_num(digit_sum(year))

    life_path = reduce_num(digit_sum(day) + digit_sum(month) + digit_sum(year))
    soul_code = reduce_num(red_day + red_month + red_year)
    karma_tail = reduce_num(red_day + red_month)
    gift = reduce_num(red_day + red_year)
    body_code = red_month
    birth_code = red_year

    gates = reduce_num(abs(soul_code - karma_tail))
    abundance = reduce_num(gift + body_code)
    memory = reduce_num(birth_code + karma_tail)
    realization = reduce_num(life_path + gift)
    love = reduce_num(karma_tail + body_code)
    spirit = reduce_num(life_path + birth_code)

    return {
        "üî¢ –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å—É–º–º—ã": {
            "–°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π –¥–µ–Ω—å": red_day,
            "–°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π –º–µ—Å—è—Ü": red_month,
            "–°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π –≥–æ–¥ (–ø–æ —Å—É–º–º–µ)": red_year
        },
        "–ß–∏—Å–ª–æ –ñ–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –ü—É—Ç–∏": life_path,
        "–ß–∏—Å–ª–æ –î—É—à–∏": soul_code,
        "–ß–∏—Å–ª–æ –ö–∞—Ä–º—ã": karma_tail,
        "–î–∞—Ä / –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª": gift,
        "–ö–æ–¥ –¢–µ–ª–∞ / –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏": body_code,
        "–≠–Ω–µ—Ä–≥–∏—è –≥–æ–¥–∞ —Ä–æ–∂–¥–µ–Ω–∏—è": birth_code,
        "–í—Ä–∞—Ç–∞ –î—É—à–∏": gates,
        "–ö–æ–¥ –ò–∑–æ–±–∏–ª–∏—è": abundance,
        "–ò–Ω–∫–∞—Ä–Ω–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å": memory,
        "–ö–∞–Ω–∞–ª –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏": realization,
        "–ö–∞–Ω–∞–ª –õ—é–±–≤–∏": love,
        "–ö–∞–Ω–∞–ª –î—É—Ö–∞": spirit
    }

# --------------------------------------------------
# 3. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Streamlit
# --------------------------------------------------

st.set_page_config(page_title="–ß–∏—Å–ª–∞ –°—É–¥—å–±—ã", page_icon="üî¢")
st.title("üî¢ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä ¬´–ß–∏—Å–ª–∞ –°—É–¥—å–±—ã¬ª")
st.markdown("–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è:")

col1, col2, col3 = st.columns(3)
with col1:
    day = st.number_input("–î–µ–Ω—å", min_value=1, max_value=31, value=1)
with col2:
    month = st.number_input("–ú–µ—Å—è—Ü", min_value=1, max_value=12, value=1)
with col3:
    year = st.number_input("–ì–æ–¥", min_value=1900, max_value=2100, value=1984)

if st.button("üîç –†–∞—Å—Å—á–∏—Ç–∞—Ç—å"):
    matrix = calculate_matrix(day, month, year)

    st.subheader("üìä –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å—É–º–º—ã")
    for k, v in matrix["üî¢ –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å—É–º–º—ã"].items():
        st.write(f"**{k}**: {v}")
    st.markdown("---")

    st.subheader("üåü –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ß–∏—Å–ª–∞ –°—É–¥—å–±—ã")
    full_list = []
    for key, value in matrix.items():
        if key == "üî¢ –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å—É–º–º—ã":
            continue
        full_list.append(value)
        archetype = ARCHETYPES.get(value)
        st.markdown(f"### üîπ {key}: {value} ‚Äî {archetype['–Ω–∞–∑–≤–∞–Ω–∏–µ'] if archetype else '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è'}")
        if archetype:
            st.markdown(f"**–°—É—Ç—å**: {archetype['–æ–ø–∏—Å–∞–Ω–∏–µ']}")
            st.markdown(f"**–°–≤–µ—Ç**: {archetype['—Å–≤–µ—Ç']}")
            st.markdown(f"**–¢–µ–Ω—å**: {archetype['—Ç–µ–Ω—å']}")
            st.markdown(f"**–ó–∞–¥–∞—á–∞**: {archetype['–∑–∞–¥–∞—á–∞']}")
            st.markdown(f"**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**: {archetype['—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏']}")
            st.markdown("---")

    st.subheader("üéØ –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç—Ä–µ—Ç")
    counter = Counter(full_list)
    –ø–æ–≤—Ç–æ—Ä = "\n".join([f"–ß–∏—Å–ª–æ {k} ({v} —Ä–∞–∑) ‚Äî {ARCHETYPES[k]['–Ω–∞–∑–≤–∞–Ω–∏–µ']}" for k, v in counter.items() if v > 1])
    –º–∞—Å—Ç–µ—Ä = "\n".join([f"{k} ‚Äî {ARCHETYPES[k]['–Ω–∞–∑–≤–∞–Ω–∏–µ']}" for k in counter if k in (11, 22, 33)])
    –∫–æ–Ω—Ñ–ª–∏–∫—Ç = ""
    if matrix.get("–ß–∏—Å–ª–æ –ñ–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –ü—É—Ç–∏") != matrix.get("–ß–∏—Å–ª–æ –ö–∞—Ä–º—ã"):
        a = matrix["–ß–∏—Å–ª–æ –ñ–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –ü—É—Ç–∏"]
        b = matrix["–ß–∏—Å–ª–æ –ö–∞—Ä–º—ã"]
        if ARCHETYPES.get(a) and ARCHETYPES.get(b):
            –∫–æ–Ω—Ñ–ª–∏–∫—Ç = f"–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç: **{a} ‚Üî {b}** ‚Äî {ARCHETYPES[a]['–Ω–∞–∑–≤–∞–Ω–∏–µ']} ‚Üî {ARCHETYPES[b]['–Ω–∞–∑–≤–∞–Ω–∏–µ']}"

    st.markdown("**–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —ç–Ω–µ—Ä–≥–∏–∏:**")
    st.markdown(–ø–æ–≤—Ç–æ—Ä or "‚Äî")
    st.markdown("**–ú–∞—Å—Ç–µ—Ä-—ç–Ω–µ—Ä–≥–∏–∏:**")
    st.markdown(–º–∞—Å—Ç–µ—Ä or "‚Äî")
    if –∫–æ–Ω—Ñ–ª–∏–∫—Ç:
        st.markdown(f"**{–∫–æ–Ω—Ñ–ª–∏–∫—Ç}**")

    key_traits = sorted(counter.items(), key=lambda x: -x[1])[:2]
    portrait_parts = []
    for num, _ in key_traits:
        arche = ARCHETYPES.get(num)
        if arche:
            portrait_parts.append(arche["–æ–ø–∏—Å–∞–Ω–∏–µ"])
    if portrait_parts:
        st.markdown("**–û–±–æ–±—â—ë–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç –ª–∏—á–Ω–æ—Å—Ç–∏:**")
        st.markdown(" ".join(portrait_parts))
